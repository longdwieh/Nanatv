-- FarmingUI_Only (LocalScript)
-- Dán vào StarterGui (LocalScript sẽ tự tạo ScreenGui)

local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- Create ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "FarmingUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

-- Helper functions
local function makeFrame(parent, props)
    local f = Instance.new("Frame")
    for k,v in pairs(props or {}) do
        if k ~= "Parent" then f[k] = v end
    end
    f.Parent = parent
    local corner = Instance.new("UICorner", f)
    corner.CornerRadius = UDim.new(0,10)
    return f
end

local function makeLabel(parent, props)
    local l = Instance.new("TextLabel")
    for k,v in pairs(props or {}) do
        if k ~= "Parent" then l[k] = v end
    end
    l.Parent = parent
    l.BackgroundTransparency = props.BackgroundTransparency or 1
    return l
end

-- Main container (centered)
local main = makeFrame(screenGui, {
    Name = "Main",
    Size = UDim2.new(0,660,0,420),
    Position = UDim2.new(0.5,-330,0.12,0),
    BackgroundColor3 = Color3.fromRGB(18,18,18),
    BorderSizePixel = 0
})

-- Top title bar (small)
local topBar = Instance.new("Frame", main)
topBar.Size = UDim2.new(1,0,0,44)
topBar.Position = UDim2.new(0,0,0,0)
topBar.BackgroundTransparency = 1

local banner = makeLabel(topBar, {
    Text = "Forge Hub | Blox Fruits [BETA]",
    Font = Enum.Font.SourceSansSemibold,
    TextSize = 16,
    TextColor3 = Color3.fromRGB(230,230,230),
    Size = UDim2.new(0.7,0,1,0),
    Position = UDim2.new(0,12,0,0),
    BackgroundTransparency = 1,
    TextXAlignment = Enum.TextXAlignment.Left
})

local byline = makeLabel(topBar, {
    Text = "by Skuppy",
    Font = Enum.Font.SourceSans,
    TextSize = 14,
    TextColor3 = Color3.fromRGB(180,180,180),
    Size = UDim2.new(0.3,-12,1,0),
    Position = UDim2.new(0.7,6,0,0),
    BackgroundTransparency = 1,
    TextXAlignment = Enum.TextXAlignment.Right
})

-- Content area (no sidebar)
local content = makeFrame(main, {
    Name = "Content",
    Size = UDim2.new(1,-24,1,-64),
    Position = UDim2.new(0,12,0,52),
    BackgroundColor3 = Color3.fromRGB(12,12,12),
})
content.ClipsDescendants = true

-- Heading text
local heading = makeLabel(content, {
    Text = "Farming",
    Font = Enum.Font.SourceSansBold,
    TextSize = 36,
    TextColor3 = Color3.fromRGB(245,245,245),
    Size = UDim2.new(1,0,0,52),
    Position = UDim2.new(0,12,0,6),
    BackgroundTransparency = 1,
    TextXAlignment = Enum.TextXAlignment.Left
})

-- Scrolling container for options
local scroll = Instance.new("ScrollingFrame", content)
scroll.Name = "OptionsScroll"
scroll.Size = UDim2.new(1,-24,1,-84)
scroll.Position = UDim2.new(0,12,0,72)
scroll.BackgroundTransparency = 1
scroll.ScrollBarThickness = 6
scroll.CanvasSize = UDim2.new(0,0,0,0)

local uiList = Instance.new("UIListLayout", scroll)
uiList.Padding = UDim.new(0,12)
uiList.SortOrder = Enum.SortOrder.LayoutOrder

-- Option row factory
local function createOption(titleText, descText, defaultState)
    local row = makeFrame(scroll, {
        Size = UDim2.new(1,0,0,84),
        BackgroundColor3 = Color3.fromRGB(28,28,28)
    })

    -- subtle border stroke
    local stroke = Instance.new("UIStroke", row)
    stroke.Color = Color3.fromRGB(70,90,70)
    stroke.Thickness = 2
    stroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

    local tl = makeLabel(row, {
        Text = titleText,
        Font = Enum.Font.SourceSansSemibold,
        TextSize = 20,
        TextColor3 = Color3.fromRGB(245,245,245),
        Size = UDim2.new(0.75,0,0,28),
        Position = UDim2.new(0,12,0,8),
        BackgroundTransparency = 1,
        TextXAlignment = Enum.TextXAlignment.Left
    })

    local sub = makeLabel(row, {
        Text = descText,
        Font = Enum.Font.SourceSans,
        TextSize = 14,
        TextColor3 = Color3.fromRGB(170,170,170),
        Size = UDim2.new(0.95,0,0,20),
        Position = UDim2.new(0,12,0,36),
        BackgroundTransparency = 1,
        TextXAlignment = Enum.TextXAlignment.Left
    })

    -- toggle background
    local toggleBg = Instance.new("Frame", row)
    toggleBg.Size = UDim2.new(0,72,0,36)
    toggleBg.Position = UDim2.new(1,-92,0,24)
    toggleBg.BackgroundColor3 = Color3.fromRGB(36,36,36)
    local tgCorner = Instance.new("UICorner", toggleBg)
    tgCorner.CornerRadius = UDim.new(0,18)

    -- knob
    local knob = Instance.new("TextButton", toggleBg)
    knob.Size = UDim2.new(0,34,0,32)
    knob.Position = defaultState and UDim2.new(1,-38,0,2) or UDim2.new(0,4,0,2)
    knob.AutoButtonColor = false
    knob.Text = ""
    knob.BackgroundColor3 = defaultState and Color3.fromRGB(64,196,255) or Color3.fromRGB(200,200,200)
    local kCorner = Instance.new("UICorner", knob)
    kCorner.CornerRadius = UDim.new(0,16)

    local state = defaultState

    knob.MouseButton1Click:Connect(function()
        state = not state
        if state then
            knob:TweenPosition(UDim2.new(1,-38,0,2), Enum.EasingDirection.Out, Enum.EasingStyle.Quad, 0.12, true)
            knob.BackgroundColor3 = Color3.fromRGB(64,196,255)
        else
            knob:TweenPosition(UDim2.new(0,4,0,2), Enum.EasingDirection.Out, Enum.EasingStyle.Quad, 0.12, true)
            knob.BackgroundColor3 = Color3.fromRGB(200,200,200)
        end
        -- client-side only: you can read `state` here to update UI or save locally
        -- print(titleText, "is now", state)
    end)

    return row
end

-- Create only UI options (no sidebar)
createOption("Auto Farm Level", "Autofarms Quests and Mobs", true)
createOption("Farm Nearest Mob", "Autofarms nearest mobs", true)
createOption("Include Bosses", "Choose whether to include bosses in the routine", false)
createOption("Safe Mode", "Only perform safe/approved actions (example)", true)

-- update scroll CanvasSize after layout
local function refreshCanvas()
    local total = 0
    for _,v in ipairs(scroll:GetChildren()) do
        if v:IsA("Frame") then
            total = total + v.AbsoluteSize.Y + uiList.Padding.Offset
        end
    end
    scroll.CanvasSize = UDim2.new(0,0,0, math.max(total, 1))
end

-- Delay a bit to allow Layout to compute then refresh
task.delay(0.05, refreshCanvas)

-- Optional: quick close toggle (top-right)
local closeBtn = Instance.new("TextButton", main)
closeBtn.Text = "✕"
closeBtn.Font = Enum.Font.SourceSansBold
closeBtn.TextSize = 18
closeBtn.TextColor3 = Color3.fromRGB(230,230,230)
closeBtn.BackgroundTransparency = 0.8
closeBtn.Size = UDim2.new(0,36,0,28)
closeBtn.Position = UDim2.new(1,-46,0,8)
local closeCorner = Instance.new("UICorner", closeBtn)
closeCorner.CornerRadius = UDim.new(0,6)
closeBtn.MouseButton1Click:Connect(function()
    screenGui.Enabled = not screenGui.Enabled
end)

print("Farming UI (content-only) created.")
